const CACHE_NAME = 'golden-pharoh-v1';const URLS_TO_CACHE = ['/','/index.html','/a2abase.html','/manifest.json'];self.addEventListener('install', event =>{event.waitUntil(caches.open(CACHE_NAME).then(cache =>{return cache.addAll(URLS_TO_CACHE);}));self.skipWaiting();});self.addEventListener('activate', event =>{event.waitUntil(caches.keys().then(cacheNames =>{return Promise.all(cacheNames.map(cacheName =>{if (cacheName !== CACHE_NAME) {return caches.delete(cacheName);}}));}));self.clients.claim();});self.addEventListener('fetch', event =>{if (event.request.method !== 'GET'){return;}event.respondWith(caches.match(event.request).then(response =>{if (response){return response;}return fetch(event.request).then(response =>{if (!response || response.status !== 200){return response;}const responseClone = response.clone();caches.open(CACHE_NAME).then(cache =>{cache.put(event.request, responseClone);});return response;}).catch(() =>{return new Response('Offline - Page cached', {status:200});});});});self.addEventListener('push', event =>{const options ={body: event.data?data.text() : 'Golden Pharoh Notification',icon: 'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20192%20192%22%3E%3Crect%20fill%3D%22%23D4AF37%22%20width%3D%22192%22%20height%3D%22192%22%2F%3E%3Ctext%20x%3D%2296%22%20y%3D%22100%22%20font-size%3D%2264%22%20fill%3D%22%231A1A1A%22%20text-anchor%3D%22middle%22%20dominant-baseline%3D%22central%22%20font-weight%3D%22bold%22%3E%F0%9F%91%91%3C%2Ftext%3E%3C%2Fsvg%3E',badge: 'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2096%2096%22%3E%3Crect%20fill%3D%22%23D4AF37%22%20width%3D%2196%22%20height%3D%2196%22%2F%3E%3C%2Fsvg%3E'};event.waitUntil(self.registration.showNotification('Golden Pharoh', options));});self.addEventListener('notificationclick', event =>{event.notification.close();event.waitUntil(clients.matchAll({type: 'window'}).then(clientList =>{for (const client of clientList) {if (client.url === '/' && 'focus' in client) {return client.focus();}}if (clients.openWindow) {return clients.openWindow('/');}}));});
